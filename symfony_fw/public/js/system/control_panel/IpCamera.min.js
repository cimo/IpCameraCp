"use strict";class IpCamera{constructor(){this.selectSended=!1,this.selectId=-1}action=()=>{this._selectDesktop(),this._selectMobile(),helper.wordTag("#ipCamera_userId","#form_ipCamera_userId"),$("#form_cp_ipCamera_create").on("submit","",e=>{e.preventDefault(),ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,t=>{ajax.reply(t,`#${e.target.id}`)},null,null)}),this._file()};changeView=()=>{if("mobile"===helper.checkWidthType()){if(!0===this.selectSended&&(this.selectId=$("#cp_ipCamera_select_mobile").find("select option:selected").val(),this.selectSended=!1),this.selectId>=0){$("#cp_ipCamera_select_result_desktop").find(".checkbox_column input[type='checkbox']").prop("checked",!1);let e=$("#cp_ipCamera_select_result_desktop").find(".checkbox_column input[type='checkbox']").parents("tr").find(".id_column");$.each(e,(e,t)=>{$.trim($(t).text())===String(this.selectId)&&$(t).parents("tr").find(".checkbox_column input").prop("checked",!0)})}}else!0===this.selectSended&&(this.selectId=$.trim($("#cp_ipCamera_select_result_desktop").find(".checkbox_column input[type='checkbox']:checked").parents("tr").find(".id_column").text()),this.selectSended=!1),this.selectId>0&&$("#cp_ipCamera_select_mobile").find(`select option[value="${this.selectId}"]`).prop("selected",!0)};videoContainer=()=>{$(".video_container").find(".video").on("load","",e=>{$(".video_container").find(".video_loading").remove(),$(".video_container").find(".video").show()})};commandContainer=()=>{};_selectDesktop=()=>{let e=new TableAndPagination;e.setButtonStatus="show",e.create(window.url.cpIpCameraSelect,"#cp_ipCamera_select_result_desktop",!0),e.search(),e.pagination(),e.sort(),$(document).on("click","#cp_ipCamera_select_result_desktop .refresh",t=>{ajax.send(!0,window.url.cpIpCameraSelect,"post",{event:"refresh",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,t=>{ajax.reply(t,""),e.populate(t),$("#cp_ipCamera_select_result").html("")},null,null)}),$(document).on("click","#cp_ipCamera_select_result_desktop .delete_all",e=>{popupEasy.create(window.text.index_5,window.textIpCamera.label_2,()=>{ajax.send(!0,window.url.cpIpCameraDelete,"post",{event:"deleteAll",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,"");let t=$("#cp_ipCamera_select_result_desktop").find("table .id_column");$.each(t,(e,t)=>{$(t).parents("tr").remove()}),$("#cp_ipCamera_select_result").html("")},null,null)})}),$(document).on("click","#cp_ipCamera_select_result_desktop .cp_ipCamera_delete",e=>{let t=$.trim($(e.currentTarget).parents("tr").find(".id_column").text());this._deleteElement(t)}),$(document).on("click","#cp_ipCamera_select_button_desktop",e=>{let t=$.trim($(e.currentTarget).parent().find(".checkbox_column input:checked").parents("tr").find(".id_column").text());ajax.send(!0,window.url.cpIpCameraSelect,"post",{event:"result",id:t,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",()=>{$("#cp_ipCamera_select_result").html("")},t=>{ajax.reply(t,`#${e.currentTarget.id}`),this._profile(t)},null,null)}),$(document).on("click",".checkbox_column input[type='checkbox']",e=>{$("#cp_ipCamera_select_result").html("")})};_selectMobile=()=>{$(document).on("submit","#form_cp_ipCamera_select_mobile",e=>{e.preventDefault(),ajax.send(!0,$(e.currentTarget).prop("action"),$(e.currentTarget).prop("method"),$(e.currentTarget).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",()=>{$("#cp_ipCamera_select_result").html("")},t=>{ajax.reply(t,`#${e.currentTarget.id}`),this._profile(t)},null,null)}),$(document).on("change","#form_ipCamera_select_id",e=>{$("#cp_ipCamera_select_result").html("")})};_profile=e=>{!1===$.isEmptyObject(e.response)&&void 0!==e.response.render&&(this.selectSended=!0,$("#cp_ipCamera_select_result").html(e.response.render),helper.wordTag("#ipCamera_userId","#form_ipCamera_userId"),materialDesign.refresh(),$("#form_cp_ipCamera_profile").on("submit","",e=>{e.preventDefault(),ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,t=>{ajax.reply(t,`#${e.target.id}`),void 0!==t.response.messages.success&&($("#cp_ipCamera_select_result").html(""),$("#cp_ipCamera_select_result_desktop .refresh").click())},null,null)}),$("#cp_ipCamera_delete").on("click","",e=>{this._deleteElement()}))};_deleteElement=e=>{let t=void 0===e?null:e;popupEasy.create(window.text.index_5,window.textIpCamera.label_1,()=>{ajax.send(!0,window.url.cpIpCameraDelete,"post",{event:"delete",id:t,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{if(ajax.reply(e,""),void 0!==e.response.messages.success){let t=$("#cp_ipCamera_select_result_desktop").find("table .id_column");$.each(t,(t,l)=>{e.response.values.id===$.trim($(l).text())&&$(l).parents("tr").remove()}),$("#form_ipCamera_select_id").find(`option[value="${e.response.values.id}"]`).remove(),$("#cp_ipCamera_select_result").html(""),$("#cp_ipCamera_select_result_desktop").find(".refresh").click()}},null,null)})};_file=()=>{let e=new TableAndPagination;e.setButtonStatus="show",e.create(window.url.cpIpCameraFile,"#cp_ipCamera_file_result",!0),e.search(),e.pagination(),e.sort(),$(document).on("click","#cp_ipCamera_file_result .refresh",t=>{ajax.send(!0,window.url.cpIpCameraFile,"post",{event:"refresh",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,t=>{ajax.reply(t,""),e.populate(t)},null,null)}),$(document).on("click","#cp_ipCamera_file_result .delete_all",e=>{popupEasy.create(window.text.index_5,window.textIpCamera.label_4,()=>{ajax.send(!0,window.url.cpIpCameraFileDelete,"post",{event:"deleteAll",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,"");let t=$("#cp_ipCamera_file_result").find("table .id_column");$.each(t,(e,t)=>{$(t).parents("tr").remove()})},null,null)})}),$(document).on("click","#cp_ipCamera_file_result .cp_ipCamera_file_delete",e=>{let t=$.trim($(e.currentTarget).parents("tr").find(".id_column").text()),l=$.trim($(e.currentTarget).parents("tr").find(".deviceName_column").text()),a=$.trim($(e.currentTarget).parents("tr").find(".fileName_column").text());popupEasy.create(window.text.index_5,window.textIpCamera.label_3,()=>{ajax.send(!0,window.url.cpIpCameraFileDelete,"post",{event:"delete",id:t,deviceName:l,fileName:a,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{if(ajax.reply(e,""),void 0!==e.response.messages.success){let t=$("#cp_ipCamera_file_result").find("table .id_column");$.each(t,(t,l)=>{e.response.values.id===$.trim($(l).text())&&$(l).parents("tr").remove()}),$("#cp_ipCamera_file_result").find(".refresh").click()}},null,null)})}),$(document).on("click","#cp_ipCamera_file_result .cp_ipCamera_file_download",e=>{let t=$.trim($(e.currentTarget).parents("tr").find(".deviceName_column").text()),l=$.trim($(e.currentTarget).parents("tr").find(".fileName_column").text()),a=`<form id="cp_ipCamera_file_download" action="${window.url.cpIpCameraFileDownload}" method="post">\n                <input type="hidden" name="deviceName" value="${t}">\n                <input type="hidden" name="fileName" value="${l}">\n                <input type="hidden" name="token" value="${window.session.token}">\n            </form>`;$(a).appendTo("body").submit(),$("#cp_ipCamera_file_download").remove()})}}